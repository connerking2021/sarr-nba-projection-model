/**
* Assertive Yield - Prebid Server Client
* v1.1.6
*
* Â© 2018-2025 Assertive Yield B.V. All Rights Reserved.
*/
!function(){const e=function e(t){return t?(t^crypto.getRandomValues(new Uint8Array(1))[0]%16>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}(),t=Math.floor(10*Math.random()),n="https://api.assertcom.de",i=(()=>{try{return"debug"===localStorage.getItem("assertiveYield")||"debug"===new URLSearchParams((window.top||window).location.search).get("assertiveYield")}catch(e){}return!1})(),o="%cAY",r=["background: linear-gradient(-152deg,#6937ea,#377fea 65%)","border-radius: 3px","color: white","padding: 1px 5px"].join(";"),s=window.console.log.bind(window.console,o,r),d=window.console.error.bind(window.console,o,r);function a(e,t){t?d(e,t):d(e)}function c(e,t){let n=0;return n|=e[t++]<<0,n|=e[t++]<<8,n|=e[t++]<<16,n|=e[t++]<<24,n}const l=4,u=13,f=5,h=6,p=4,w=(1<<p)-1,g=15;function m(e){try{return new Uint8Array(e)}catch(t){const n=new Array(e);for(let t=0;t<e;t++)n[t]=0;return n}}const b=65536;function y(e){const t=function(e){const t=m(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e),n=(i=t.length)+16+i/255|0;var i;const o=function(){try{return new Uint32Array(b)}catch(e){const t=new Array(b);for(let e=0;e<b;e++)t[e]=0;return t}}(),r=m(n+5),{length:s}=e;r[0]="|".charCodeAt(0),r[1]=(4278190080&s)>>24,r[2]=(16711680&s)>>16,r[3]=(65280&s)>>8,r[4]=(255&s)>>0;const d=function(e,t,n,i,o,r){let s,d,a,m,b,y,I,v=n;const T=o+i;if(d=i,o>=u){let n=3+(1<<h);for(;i+l<T-f;){const o=c(e,i);let u=(A=o,(-1252372727^(A=(A=(A=374761393+(A=-949894596^(A=2127912214+(A|=0)+(A<<12)|0)^A>>>19)+(A<<5)|0)-744332180^A<<9)-42973499+(A<<3)|0)^A>>>16|0)>>>0);if(u=(u>>16^u)>>>0&65535,s=r[u]-1,r[u]=i+1,s<0||i-s>>>16>0||c(e,s)!==o){b=n++>>h,i+=b;continue}for(n=3+(1<<h),y=i-d,m=i-s,s+=l,a=i+=l;i<T-f&&e[i]===e[s];)i++,s++;a=i-a;const B=a<w?a:w;if(y>=g){for(t[v++]=(g<<p)+B,I=y-g;I>=255;I-=255)t[v++]=255;t[v++]=I}else t[v++]=(y<<p)+B;for(let n=0;n<y;n++)t[v++]=e[d+n];if(t[v++]=m,t[v++]=m>>8,a>=w){for(I=a-w;I>=255;I-=255)t[v++]=255;t[v++]=I}d=i}}var A;if(0===d)return 0;if(y=T-d,y>=g){for(t[v++]=g<<p,I=y-g;I>=255;I-=255)t[v++]=255;t[v++]=I}else t[v++]=y<<p;for(i=d;i<T;)t[v++]=e[i++];return v}(t,r,5,0,t.length,o);if("function"==typeof r.slice)return r.slice(0,d);const a=m(d);for(let e=0;e<d;e++)a[e]=r[e];return a}function I(e,t){let n=t;i||(n=function(e){if("function"==typeof Array.from||"string"==typeof e){const t=y(Array.from(e).map((e=>{const t=e.charCodeAt(0);return t>=127?"\\u"+("00"+t.toString(16)).substr(-4):e})).join(""));if(0!==t.length)return t}return null}(t),n||(n=t));try{if(navigator.sendBeacon.bind(navigator)(e,n))return}catch(e){}}const v="1.1.6";function T(t){const n=Date.now(),i={impression_time:n,timestamp:n,version:"s2s-"+v,sessionUUID:e,pageViewUUID:e,protocol:window.location.protocol,host:window.location.host,pathname:window.location.pathname,pathname_split:window.location.pathname.split("/").filter((e=>!!e)),window:{innerWidth:window.innerWidth,innerHeight:window.innerHeight,scrollY:window.scrollY||window.pageYOffset}};for(let e=1;e<=15;e++){const n=`custom_${e}`;i[n]=t.analytics[n]}return i}const A={},B={},U={},R={};function E(e){try{let t=A;if(e){const e=(new Date).getTime(),n=15e3;t=function(e,t){const n={};return Object.keys(e).forEach((i=>{t(e[i],i)&&(n[i]=e[i])})),n}(t,(t=>{let{highestBidTtl:i,highestBidResponseTime:o}=t;return o+1e3*i-n<=e}))}else t={...t};const i=Object.keys(t);if(0===i.length)return;i.forEach((t=>{delete A[t],e&&(Object.keys(U[t]).forEach((e=>{delete R[e];for(const t in B)if(B[t]===e){delete B[t];break}})),delete U[t])})),function(e){const t=Object.values(e);I(n+"/auction",JSON.stringify(t))}(t)}catch(e){a("Failed to log auctions",e)}}function j(e){let{requestId:t,responseTimestamp:n}=e;try{const e=function(e){if(e){const t=R[e];if(t){const n=U[t];if(!n)return a("Unable to find auctionId in map"),null;const i=n[e];return void 0===i?(a("Unable to find index in map"),null):A[t]?.bids?.[i]}}return null}(t);e&&(e.rendered=!0,e.renderedTime=Date.now()-n)}catch(e){a("Failed to handle bidWon",e)}}window.ayS2STag={init:e=>{const n=window[e.pbjs]=window[e.pbjs]||{};n.que=n.que||[],"object"!=typeof e.analytics&&(e.analytics={enabled:e.analytics}),e.analytics.enabled&&e.entityId&&(function(e){if(i){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];s(e,...n)}}("Registering auction analytics event."),function(e,n){e.que.push((()=>{e.onEvent("auctionEnd",(i=>{const{auctionId:o,timeout:r,bidsReceived:s,bidderRequests:d,noBids:c}=i;U[o]={};try{const i={...T(n),entityId:n.entityId,custom_15:t,prebid_version:e.version||null,prebid_timeout:r,auctionId:o,highestBidTtl:0,highestBidResponseTime:0,bids:[]},a={};for(let e=0;e<s.length;e++){const t=s[e];a[t.requestId]=t.cpm,t.ttl>i.highestBidTtl&&(i.highestBidTtl=t.ttl),t.responseTimestamp>i.highestBidResponseTime&&(i.highestBidResponseTime=t.responseTimestamp)}const l=s.map((e=>e.requestId)).sort(((e,t)=>a[e]===a[t]?0:a[e]>a[t]?-1:1));d.forEach((e=>{let{bidderCode:t,bids:n}=e;n.forEach((e=>{const n=s.find((t=>{let{requestId:n}=t;return n===e.bidId})),r=c.find((t=>{let{bidId:n}=t;return n===e.bidId})),d={adUnitPath:e.adUnitCode,bidder:t,didTimeout:!n&&!r,didBid:!!n,rendered:!1,source:e.src};n&&(d.mediaType=n.mediaType,d.creative_width=n.width,d.creative_height=n.height,d.timeToRespond=n.timeToRespond,d.bidPosition=l.indexOf(n.requestId),d.bid=n.cpm,d.currency=n.currency,d.originalBid=Number(n.originalCpm)||void 0,d.originalCurrency=n.originalCurrency,d.source=n.source,d.ttl=n.ttl,d.responseTimestamp=n.responseTimestamp,d.meta=n.meta||n.appnexus||n.rubicon,d.dealId=n.dealId,n.floorData&&(d.floor=parseFloat(n.floorData.floorValue)||0),B[n.adId]=e.bidId,R[e.bidId]=o);const a=i.bids.push(d);U[o][e.bidId]=a-1}))})),A[o]=i}catch(e){a("Failed to handle auctionEnd",e)}})),e.onEvent("bidWon",j),window.setInterval((()=>{E(!0)}),6e4),window.addEventListener("pagehide",(()=>{E(!1)}),{passive:!0})}))}(n,e))}}}();
